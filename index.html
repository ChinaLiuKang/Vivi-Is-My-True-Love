<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>轮回之爱 - Eternal Love</title>
    <style>
        /* ==================== 保护页面样式 ==================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            overflow-x: hidden; /* 只隐藏横向溢出 */
            /* 【修改】移除 overflow: hidden 以允许页面整体滚动 */
        }

        /* 密码保护界面样式 */
        .protected-screen {
            text-align: center;
            padding: 2rem;
            max-width: 500px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            border: 2px solid #ff4757;
        }

        .title {
            font-size: 2rem;
            margin-bottom: 2rem;
            color: #ff4757;
            font-weight: bold;
        }

        .password-form {
            margin: 2rem 0;
        }

        .password-input {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #ff4757;
            border-radius: 10px;
            color: white;
            padding: 12px 20px;
            font-size: 1.1rem;
            width: 100%;
            margin-bottom: 1rem;
            text-align: center;
        }

        .submit-btn {
            background: linear-gradient(45deg, #ff4757, #8a2be2);
            border: none;
            border-radius: 10px;
            color: white;
            padding: 12px 30px;
            font-size: 1.1rem;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 71, 87, 0.5);
        }

        .hint {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 1rem;
            line-height: 1.5;
        }

        .error-message {
            color: #ff6b6b;
            margin-top: 1rem;
            display: none;
        }

        /* ==================== 主内容样式 ==================== */

        /* 宇宙背景样式 */
        .universe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        /* 星星样式 */
        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        /* 星星闪烁动画 */
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* 【修改】主容器样式 - 恢复宽松布局，仅自身可滚动 */
        .container {
            max-width: 1200px;
            margin: 50px auto 180px auto; /* 增加上下外边距，宽松布局 */
            padding: 2rem;
            position: relative;
            z-index: 1;
            /* 不再设置 max-height 和 overflow，让页面自然滚动 */
        }

        /* 【修改】代码显示区域样式 - 恢复原有边框，仅内部可滚动 */
        .code-display {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #ff4757;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
            backdrop-filter: blur(5px);
            /* 【修复】核心：设置固定高度并允许内部滚动 */
            max-height: 60vh; /* 占据视口60%的高度 */
            overflow-y: auto; /* 垂直方向溢出时显示滚动条 */
            scrollbar-width: thin; /* 美化滚动条 */
            scrollbar-color: #ff4757 rgba(255, 255, 255, 0.1);
        }

        /* 【修复】Webkit浏览器滚动条样式 */
        .code-display::-webkit-scrollbar {
            width: 8px;
        }
        .code-display::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        .code-display::-webkit-scrollbar-thumb {
            background: #ff4757;
            border-radius: 4px;
        }
        .code-display::-webkit-scrollbar-thumb:hover {
            background: #8a2be2;
        }

        /* 代码语法高亮 */
        .keyword { color: #ff4757; font-weight: bold; }
        .comments { color: #6c757d; font-style: italic; }
        .string { color: #2ed573; }
        .function { color: #3742fa; }
        .number { color: #ffa502; }
        .space { margin-left: 1rem; }

        /* ==================== 【新增】三种瞳术特效样式 ==================== */

        /* 轮回眼特效样式 */
        .rinnegan-eye {
            position: fixed;
            width: 180px;
            height: 180px;
            opacity: 0.15; /* 半透明作为背景 */
            z-index: -1;
            pointer-events: none;
        }

        /* 轮回眼位置 - 左上 */
        .rinnegan-eye.left-top {
            top: 15%;
            left: 10%;
        }

        /* 轮回眼内部圆圈 */
        .rinnegan-circle {
            position: absolute;
            border: 2px solid #8a2be2; /* 紫色 */
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: rinneganRotate 20s linear infinite;
        }
        .rinnegan-circle:nth-child(1) { width: 30px; height: 30px; animation-delay: 0s; }
        .rinnegan-circle:nth-child(2) { width: 60px; height: 60px; animation-delay: -5s; animation-duration: 15s; }
        .rinnegan-circle:nth-child(3) { width: 90px; height: 90px; animation-delay: -10s; animation-duration: 25s; }
        .rinnegan-circle:nth-child(4) { width: 120px; height: 120px; animation-delay: -15s; animation-duration: 30s; }

        @keyframes rinneganRotate {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* 写轮眼特效样式 */
        .sharingan-eye {
            position: fixed;
            width: 150px;
            height: 150px;
            opacity: 0.15;
            z-index: -1;
            pointer-events: none;
        }

        /* 写轮眼位置 - 右上 */
        .sharingan-eye.right-top {
            top: 20%;
            right: 8%;
        }

        /* 写轮眼内部图案 (简化版三勾玉) */
        .sharingan-inner {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: sharinganSpin 10s linear infinite;
        }
        .tomaloe {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #ff0000; /* 红色 */
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform-origin: 0 0;
        }
        .tomaloe:nth-child(1) { transform: translate(-50%, -50%) rotate(0deg) translateX(40px); }
        .tomaloe:nth-child(2) { transform: translate(-50%, -50%) rotate(120deg) translateX(40px); }
        .tomaloe:nth-child(3) { transform: translate(-50%, -50%) rotate(240deg) translateX(40px); }

        @keyframes sharinganSpin {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* 白眼特效样式 */
        .byakugan-eye {
            position: fixed;
            width: 140px;
            height: 140px;
            opacity: 0.2;
            z-index: -1;
            pointer-events: none;
        }

        /* 白眼位置 - 底部 */
        .byakugan-eye.bottom-center {
            bottom: 18%;
            left: 50%;
            transform: translateX(-50%);
        }

        /* 白眼内部 (青白色同心圆) */
        .byakugan-inner {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .byakugan-circle {
            position: absolute;
            border: 3px solid #87ceeb; /* 青白色 */
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: byakuganPulse 4s ease-in-out infinite;
        }
        .byakugan-circle:nth-child(1) { width: 30px; height: 30px; animation-delay: 0s; }
        .byakugan-circle:nth-child(2) { width: 70px; height: 70px; animation-delay: 0.5s; }
        .byakugan-circle:nth-child(3) { width: 100%; height: 100%; animation-delay: 1s; }

        @keyframes byakuganPulse {
            0%, 100% { opacity: 0.3; border-width: 2px; }
            50% { opacity: 0.7; border-width: 4px; box-shadow: 0 0 15px #87ceeb; }
        }

        /* ==================== 通用组件样式 ==================== */

        /* 时间线事件样式 */
        .timeline-event {
            background: rgba(255, 71, 87, 0.1);
            border-left: 4px solid #ff4757;
            padding: 1.5rem; /* 增加内边距 */
            margin: 1.5rem 0; /* 增加外边距 */
            border-radius: 0 10px 10px 0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { border-left-color: #ff4757; }
            50% { border-left-color: #8a2be2; }
        }

        /* 查克拉节点样式 */
        .chakra-point {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff4757;
            border-radius: 50%;
            animation: chakraGlow 2s infinite;
        }

        @keyframes chakraGlow {
            0%, 100% { box-shadow: 0 0 5px #ff4757; }
            50% { box-shadow: 0 0 20px #ff4757, 0 0 30px #8a2be2; }
        }

        /* 宇宙大爆炸效果 */
        .big-bang {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: radial-gradient(circle, #ff4757, #8a2be2, #000);
            transform: translate(-50%, -50%);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
        }

        .big-bang.active {
            animation: bigBang 2s ease-out forwards;
        }

        @keyframes bigBang {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
                box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7);
            }
            50% {
                width: 100vmax;
                height: 100vmax;
                opacity: 0.8;
                box-shadow: 0 0 50px 20px rgba(138, 43, 226, 0.5);
            }
            100% {
                width: 200vmax;
                height: 200vmax;
                opacity: 0;
                box-shadow: 0 0 100px 40px rgba(255, 71, 87, 0.3);
            }
        }

        /* 火影语录样式 */
        .naruto-quote {
            font-style: italic;
            color: #ffa502;
            text-align: center;
            margin: 2.5rem 0; /* 增加外边距 */
            padding: 1.5rem;
            border: 1px solid #ffa502;
            border-radius: 10px;
            background: rgba(255, 165, 2, 0.1);
        }

        /* 周期计数器样式 */
        .cycle-counter {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px 15px;
            border-radius: 10px;
            border: 1px solid #8a2be2;
            font-size: 14px;
            backdrop-filter: blur(5px);
            z-index: 100;
        }

        /* 音乐播放器样式 */
        .music-player {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            padding: 20px;
            border-radius: 20px;
            border: 2px solid #2ed573;
            backdrop-filter: blur(15px);
            width: 90%;
            max-width: 500px;
            z-index: 100;
            box-shadow: 0 0 30px rgba(46, 213, 115, 0.3);
            cursor: move;
            user-select: none;
            transition: box-shadow 0.3s ease;
        }

        .music-player.dragging {
            box-shadow: 0 0 40px rgba(46, 213, 115, 0.6);
            border-color: #ff4757;
        }

        /* ... 音乐播放器内部样式保持不变 ... */
        .music-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .music-title {
            color: #2ed573;
            font-size: 16px;
            font-weight: bold;
        }

        .music-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }

        .control-btn {
            background: linear-gradient(45deg, #2ed573, #ff4757);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            position: relative;
        }

        .control-btn::after {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
        }

        .control-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px #2ed573;
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .progress-container {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin: 15px 0;
            overflow: hidden;
            cursor: pointer;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #2ed573, #ff4757);
            width: 0%;
            transition: width 0.1s;
            border-radius: 3px;
        }

        .progress-handle {
            position: absolute;
            top: 50%;
            width: 12px;
            height: 12px;
            background: #fff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: 0 0 10px rgba(46, 213, 115, 0.8);
        }

        .progress-container:hover .progress-handle {
            opacity: 1;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 10px;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-control input {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .volume-control input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: #2ed573;
            border-radius: 50%;
            cursor: pointer;
        }

        /* 歌词显示容器 */
        .lyrics-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 30px 40px;
            border-radius: 20px;
            border: 2px solid #ff4757;
            text-align: center;
            backdrop-filter: blur(15px);
            max-width: 80%;
            z-index: 101;
            box-shadow: 0 0 40px rgba(255, 71, 87, 0.4);
            display: none;
        }

        .lyrics-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        .lyrics-title {
            color: #ff4757;
            font-size: 18px;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .current-lyric {
            font-size: 24px;
            color: #2ed573;
            margin: 15px 0;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .next-lyric {
            font-size: 16px;
            color: #6c757d;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .lyrics-close {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #ff4757;
            font-size: 20px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lyrics-close:hover {
            background: rgba(255, 71, 87, 0.2);
        }

        /* 大爆炸触发按钮 */
        .bigbang-trigger {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 71, 87, 0.8);
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            z-index: 100;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }

        .bigbang-trigger:hover {
            background: #8a2be2;
            transform: scale(1.05);
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
                margin: 30px auto 150px auto; /* 移动端调整边距 */
            }

            .code-display {
                padding: 1.5rem;
                font-size: 14px;
                max-height: 50vh; /* 移动端代码区稍矮 */
            }

            /* 移动端调整瞳术大小和位置 */
            .rinnegan-eye, .sharingan-eye, .byakugan-eye {
                transform: scale(0.7);
            }
            .rinnegan-eye.left-top { top: 10%; left: 5%; }
            .sharingan-eye.right-top { top: 12%; right: 5%; }
            .byakugan-eye.bottom-center { bottom: 15%; }

            .music-player {
                width: 95%;
                padding: 15px;
            }

            .control-btn {
                width: 45px;
                height: 45px;
                font-size: 16px;
            }

            .current-lyric {
                font-size: 20px;
            }

            .lyrics-container {
                padding: 20px 30px;
            }

            .timeline-event, .naruto-quote {
                padding: 1rem;
                margin: 1rem 0;
            }
        }

        /* 密码错误抖动动画 */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
    </style>
</head>
<body>
    <!-- ==================== 密码保护界面 ==================== -->
    <div class="protected-screen" id="protectedScreen">
        <div class="title">Eternal Love 🔒</div>
        <div class="password-form">
            <input type="text" class="password-input" id="passwordInput"
                   placeholder="Enter the secret phrase..."
                   onkeypress="checkEnter(event)">
            <button class="submit-btn" onclick="checkPassword()">Unlock Content</button>
        </div>
        <div class="hint">
            💡 Hint: The password is a Chinese blessing<br>
            💡 提示：密码是一句中文祝福语<br>
            🎮 Press F12 after unlocking for special features<br>
            🎮 解锁后按F12获得特殊功能
        </div>
        <div class="error-message" id="errorMessage">
            Incorrect password. Please try again.
        </div>
    </div>

    <!-- ==================== 【新增】三种瞳术特效 ==================== -->
    <!-- 轮回眼 (左上) -->
    <div class="rinnegan-eye left-top">
        <div class="rinnegan-circle"></div>
        <div class="rinnegan-circle"></div>
        <div class="rinnegan-circle"></div>
        <div class="rinnegan-circle"></div>
    </div>

    <!-- 写轮眼 (右上) -->
    <div class="sharingan-eye right-top">
        <div class="sharingan-inner">
            <div class="tomaloe"></div>
            <div class="tomaloe"></div>
            <div class="tomaloe"></div>
        </div>
    </div>

    <!-- 白眼 (底部居中) -->
    <div class="byakugan-eye bottom-center">
        <div class="byakugan-inner">
            <div class="byakugan-circle"></div>
            <div class="byakugan-circle"></div>
            <div class="byakugan-circle"></div>
        </div>
    </div>

    <!-- ==================== 原有组件 ==================== -->
    <button class="bigbang-trigger" onclick="triggerBigBang()">💥 触发宇宙大爆炸</button>
    <div class="cycle-counter" id="cycleCounter">
        轮回周期: <span id="currentCycle">0</span>
    </div>

    <!-- 宇宙背景 -->
    <div class="universe" id="universe"></div>

    <!-- 音乐播放器 -->
    <div class="music-player" id="musicPlayer">
        <div class="music-header" id="dragHandle">
            <div class="music-title">🎵 孙燕姿 - 克卜勒 (可拖拽)</div>
            <button class="control-btn" onclick="toggleLyrics()" title="显示歌词">📝</button>
        </div>
        <div class="time-display">
            <span id="currentTime">0:00</span>
            <span id="duration">4:09</span>
        </div>
        <div class="progress-container" id="progressContainer">
            <div class="progress-bar" id="progressBar"></div>
            <div class="progress-handle" id="progressHandle"></div>
        </div>
        <div class="music-controls">
            <button class="control-btn" onclick="skipBackward()" title="后退15秒">⏪</button>
            <button class="control-btn" onclick="playPause()" id="playPauseBtn" title="播放/暂停">▶️</button>
            <button class="control-btn" onclick="skipForward()" title="前进15秒">⏩</button>
        </div>
        <div class="volume-control">
            <span>🔊</span>
            <input type="range" id="volumeControl" min="0" max="1" step="0.1" value="0.7">
            <span id="volumeValue">70%</span>
        </div>
    </div>

    <!-- 歌词显示 -->
    <div class="lyrics-container" id="lyricsContainer">
        <button class="lyrics-close" onclick="toggleLyrics()">×</button>
        <div class="lyrics-title">孙燕姿 - 克卜勒</div>
        <div class="current-lyric" id="currentLyric">等不到你 成为我最闪亮的星星</div>
        <div class="next-lyric" id="nextLyric">我依然愿意借给你我的光</div>
    </div>

    <!-- 主内容容器 -->
    <div class="container">
        <!-- 代码表白区域 -->
        <div class="code-display">
            <span class="comments">/**</span><br>
            <span class="comments"> * 无限月读·轮回之爱 - Infinite Tsukuyomi of Eternal Love</span><br>
            <span class="comments"> * 创作者: 刘康 (六道仙人转世)</span><br>
            <span class="comments"> * 时间: 从创世之初到世界终结</span><br>
            <span class="comments"> * 描述: 跨越多元宇宙的羁绊，每27年一次的轮回重生</span><br>
            <span class="comments"> * 背景音乐: 孙燕姿《克卜勒》- 我们的唤醒之歌</span><br>
            <span class="comments"> * 特殊: 27年轮回系统，宇宙大爆炸，火影忍者元素融合</span><br>
            <span class="comments"> */</span><br>
            <br>
            <span class="keyword">const</span> 六道仙人 = <span class="string">"刘康"</span>;<br>
            <span class="keyword">const</span> 辉夜姬 = <span class="string">"Vivi"</span>;<br>
            <span class="keyword">const</span> 轮回周期 = <span class="number">27</span>; <span class="comments">// 年 - 火影中的轮回周期</span><br>
            <span class="keyword">const</span> 查克拉总量 = <span class="number">999999</span>;<br>
            <span class="keyword">const</span> 唤醒歌曲 = <span class="string">"孙燕姿 - 克卜勒"</span>; <span class="comments">// KTV唤醒记忆的歌曲</span><br>
            <br>
            <span class="comments">// 孙燕姿音乐系统 - 纪念在KTV被唤醒的瞬间</span><br>
            <span class="keyword">class</span> 燕姿音乐系统 {<br>
            <span class="space"><span class="keyword">constructor</span>() {</span><br>
            <span class="space"><span class="space">this</span>.歌曲列表 = </span>[<br>
            <span class="space"><span class="space"><span class="space">{ 名称: </span></span><span class="string">"克卜勒"</span>, 主题: <span class="string">"宇宙与命运"</span> },</span><br>
            <span class="space"><span class="space"><span class="space">{ 名称: </span></span><span class="string">"遇见"</span>, 主题: <span class="string">"缘分与相遇"</span> },</span><br>
            <span class="space"><span class="space"><span class="space">{ 名称: </span></span><span class="string">"开始懂了"</span>, 主题: <span class="string">"成长与领悟"</span> }</span><br>
            <span class="space"><span class="space">];</span></span><br>
            <span class="space"><span class="space">this</span>.当前歌曲 = </span><span class="number">0</span>;<br>
            <span class="space">}</span><br>
            <br>
            <span class="space">播放唤醒之歌() {</span><br>
            <span class="space"><span class="space">console</span>.log(<span class="string">"🎵 被孙燕姿的歌声唤醒... 在KTV的那一天永远铭记"</span>);</span><br>
            <span class="space"><span class="space">触发大爆炸();</span></span><br>
            <span class="space"><span class="space">return</span> <span class="string">"音乐的力量穿越轮回，唤醒沉睡的记忆"</span>;</span><br>
            <span class="space">}</span><br>
            <br>
            <span class="space">切换歌曲() {</span><br>
            <span class="space"><span class="space">this</span>.当前歌曲 = </span>(this.当前歌曲 + 1) % this.歌曲列表.length;<br>
            <span class="space"><span class="space">return</span> this.歌曲列表[this.当前歌曲].名称;</span><br>
            <span class="space">}</span><br>
            }<br>
            <br>
            <span class="comments">// 六道模式·开启 - 火影忍者元素</span><br>
            <span class="keyword">class</span> 六道模式 {<br>
            <span class="space"><span class="keyword">constructor</span>() {</span><br>
            <span class="space"><span class="space">this</span>.轮回眼 = </span><span class="keyword">true</span>;<br>
            <span class="space"><span class="space">this</span>.求道玉 = </span><span class="number">9</span>;<br>
            <span class="space"><span class="space">this</span>.阴阳遁 = </span><span class="keyword">true</span>;<br>
            <span class="space"><span class="space">this</span>.背景音乐 = </span><span class="keyword">new</span> 燕姿音乐系统();<br>
            <span class="space">}</span><br>
            <br>
            <span class="space">无限月读() {</span><br>
            <span class="space"><span class="space">this</span>.背景音乐.播放唤醒之歌();</span><br>
            <span class="space"><span class="space">return</span> <span class="string">"让世界陷入爱的幻术，只有我们的羁绊永恒"</span>;</span><br>
            <span class="space">}</span><br>
            <br>
            <span class="space">地爆天星(爱意) {</span><br>
            <span class="space"><span class="space">const</span> 引力 = </span>爱意 * 1000;<br>
            <span class="space"><span class="space">return</span> <span class="string">`创造新宇宙，引力强度: ${引力}`</span>;</span><br>
            <span class="space">}</span><br>
            }<br>
            <br>
            <span class="comments">// 27年轮回系统 - 类似火影的转世设定</span><br>
            <span class="keyword">class</span> 轮回系统 {<br>
            <span class="space"><span class="keyword">constructor</span>() {</span><br>
            <span class="space"><span class="space">this</span>.当前纪元 = </span><span class="number">0</span>;<br>
            <span class="space"><span class="space">this</span>.轮回次数 = </span><span class="number">0</span>;<br>
            <span class="space"><span class="space">this</span>.下次大事件 = </span>new Date().getFullYear() + 轮回周期;<br>
            <span class="space">}</span><br>
            <br>
            <span class="space">宇宙重启() {</span><br>
            <span class="space"><span class="space">this</span>.轮回次数++;</span><br>
            <span class="space"><span class="space">this</span>.当前纪元++;</span><br>
            <span class="space"><span class="space">触发大爆炸视觉效果();</span></span><br>
            <span class="space"><span class="space">console</span>.log(<span class="string">`💥 第${this.轮回次数}次宇宙大爆炸发生！`</span>);</span><br>
            <span class="space"><span class="space">return</span> <span class="string">`第${this.轮回次数}次轮回开始 - 纪元${this.当前纪元}`</span>;</span><br>
            <span class="space">}</span><br>
            <br>
            <span class="space">检查自然轮回() {</span><br>
            <span class="space"><span class="space">const</span> 当前时间 = </span>new Date();<br>
            <span class="space"><span class="space">const</span> 月份 = </span>当前时间.getMonth() + 1;<br>
            <span class="space"><span class="space">const</span> 日期 = </span>当前时间.getDate();<br>
            <span class="space"><span class="space">return</span> 月份 === 6 && 日期 === 7;</span><br>
            <span class="space">}</span><br>
            }<br>
            <br>
            <span class="keyword">const</span> 六道 = <span class="keyword">new</span> 六道模式();<br>
            <span class="keyword">const</span> 轮回 = <span class="keyword">new</span> 轮回系统();<br>
            <br>
            <span class="comments">// 永恒的誓言 - 类似鸣人对佐助的羁绊</span><br>
            <span class="function">function</span> 忍者誓言() {<br>
            <span class="space"><span class="keyword">if</span> (轮回.检查自然轮回()) {</span><br>
            <span class="space"><span class="space">console</span>.log(轮回.宇宙重启());</span><br>
            <span class="space"><span class="space">console</span>.log(六道.无限月读());</span><br>
            <span class="space">}</span><br>
            <span class="space"><span class="keyword">return</span> <span class="string">"即使轮回转世，这份羁绊也不会消失！"</span>;</span><br>
            }<br>
            <br>
            <span class="comments">// 启动无限轮回</span><br>
            <span class="keyword">setInterval</span>(() => {<br>
            <span class="space">忍者誓言();</span><br>
            <span class="space">更新轮回显示();</span><br>
            <span class="space"><span class="keyword">if</span> (Math.random() < 0.01) {</span><br>
            <span class="space"><span class="space">触发查克拉波动();</span></span><br>
            <span class="space">}</span><br>
            }, 1000);<br>
        </div>

        <!-- 火影经典语录 -->
        <div class="naruto-quote">
            "我向来都是有话直说，这就是我的忍道！"<br>
            "孤独，不是被父母责备后难过的那种程度比得上的！"<br>
            "因为火影——是我的梦想！"<br>
            - 漩涡鸣人 (我们的精神写照)
        </div>

        <!-- 时间线事件 -->
        <div class="timeline-event">
            <strong>🌌 宇宙纪元 1:</strong> 六道仙人创造忍宗，爱的查克拉初次显现
        </div>
        <div class="timeline-event">
            <strong>🎵 特殊事件:</strong> 在KTV被孙燕姿的歌声唤醒，命运之轮开始转动
        </div>
        <div class="timeline-event">
            <strong>💫 宇宙纪元 27:</strong> 第一次轮回，辉夜姬降临，无限月读启动
        </div>
        <div class="timeline-event">
            <strong>🔥 宇宙纪元 54:</strong> 忍者世界形成，爱的羁绊穿越时空
        </div>
        <div class="timeline-event">
            <strong>❤️ 当前纪元:</strong> 代码与查克拉融合，创造数字世界的永恒之爱
        </div>

        <!-- 查克拉节点 -->
        <div class="chakra-point" style="top: 100px; left: 100px;"></div>
        <div class="chakra-point" style="top: 200px; right: 150px;"></div>
        <div class="chakra-point" style="bottom: 150px; left: 200px;"></div>
        <div class="chakra-point" style="bottom: 100px; right: 100px;"></div>
    </div>

    <!-- 宇宙大爆炸效果 -->
    <div class="big-bang" id="bigBang"></div>

    <!-- 音频元素 -->
    <audio id="backgroundMusic">
        <source src="music/yanzi-kepule.ogg" type="audio/ogg">
        <source src="music/yanzi-kepule.mp3" type="audio/mp3">
        您的浏览器不支持音频播放
    </audio>

    <script>
        // ==================== 密码保护系统 ====================
        const CORRECT_PASSWORD = "祝学友哥与Vivi姐永世幸福";
        let unlockAttempts = 0;
        let contentUnlocked = false;

        function checkPassword() {
            const input = document.getElementById('passwordInput').value.trim();
            const errorMsg = document.getElementById('errorMessage');

            if (input === CORRECT_PASSWORD) {
                unlockContent();
            } else {
                unlockAttempts++;
                errorMsg.style.display = 'block';
                errorMsg.textContent = `密码错误 (尝试次数: ${unlockAttempts})`;
                const inputElement = document.getElementById('passwordInput');
                inputElement.style.animation = 'shake 0.5s';
                setTimeout(() => inputElement.style.animation = '', 500);
                if (unlockAttempts >= 3) {
                    errorMsg.innerHTML += `<br>💡 提示：祝福学友哥和Vivi姐的句子`;
                }
            }
        }

        function checkEnter(event) {
            if (event.key === 'Enter') checkPassword();
        }

        function unlockContent() {
            contentUnlocked = true;
            document.getElementById('protectedScreen').style.display = 'none';
            showUnlockMessage();
        }

        function showUnlockMessage() {
            setTimeout(() => {
                const originalLog = console.log;
                console.log = function() { return originalLog.apply(this, arguments); };
                console.log(`%c
                🎉 解锁成功！
                💖 祝福学友哥与Vivi姐永世幸福
                🌌 轮回眼、写轮眼、白眼已显现
                🎮 按F12开启开发者模式获得特殊功能
                `, 'color: #ff4757; font-size: 16px; font-weight: bold;');
                setTimeout(() => { console.log = function() {}; }, 5000);
            }, 1000);
        }

        // ==================== F12保护机制 ====================
        let devtoolsOpen = false;
        setInterval(function() {
            const startTime = performance.now();
            debugger;
            const endTime = performance.now();
            if (endTime - startTime > 100) {
                if (!devtoolsOpen && contentUnlocked) {
                    devtoolsOpen = true;
                    onDevToolsOpen();
                }
            } else {
                devtoolsOpen = false;
            }
        }, 1000);

        function onDevToolsOpen() {
            if (!contentUnlocked) return;
            const originalLog = console.log;
            console.log = function() { return originalLog.apply(this, arguments); };
            console.log(`%c
            🔓 开发者模式已激活！
            👁️ 三种瞳术之力已加强
            💫 特殊功能已解锁
            `, 'color: #2ed573; font-size: 14px; font-weight: bold;');
            setTimeout(() => { console.log = function() {}; }, 3000);
        }

        // 基础保护措施
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.addEventListener('selectstart', e => e.preventDefault());
        console.log = function() {};
        console.warn = function() {};
        console.error = function() {};

        // ==================== 轮回系统核心 ====================
        class 轮回系统 {
            constructor() {
                this.当前纪元 = 0;
                this.轮回次数 = 0;
                this.轮回周期 = 27;
                this.下次大事件 = new Date().getFullYear() + this.轮回周期;
            }
            宇宙重启() {
                this.轮回次数++;
                this.当前纪元++;
                触发大爆炸视觉效果();
                更新轮回显示();
                增强瞳术特效(); // 【新增】重启时增强眼睛特效
                console.log(`💥 第${this.轮回次数}次宇宙大爆炸发生！`);
                console.log(`🔄 进入第${this.当前纪元}纪元`);
                return `第${this.轮回次数}次轮回开始 - 纪元${this.当前纪元}`;
            }
            检查自然轮回() {
                const 当前时间 = new Date();
                return (当前时间.getMonth() + 1 === 6) && (当前时间.getDate() === 7);
            }
        }
        const 轮回 = new 轮回系统();

        // ==================== 【新增】瞳术增强函数 ====================
        function 增强瞳术特效() {
            const eyes = document.querySelectorAll('.rinnegan-eye, .sharingan-eye, .byakugan-eye');
            eyes.forEach(eye => {
                eye.style.opacity = '0.3'; // 暂时增强不透明度
                eye.style.filter = 'drop-shadow(0 0 10px currentColor)';
                setTimeout(() => {
                    eye.style.opacity = '';
                    eye.style.filter = '';
                }, 2000);
            });
        }

        // ==================== 视觉效果函数 ====================
        function 触发大爆炸视觉效果() {
            const bigBang = document.getElementById('bigBang');
            bigBang.classList.remove('active');
            void bigBang.offsetWidth;
            bigBang.classList.add('active');
            document.body.style.animation = 'none';
            setTimeout(() => { document.body.style.animation = 'shake 0.5s'; }, 10);
            触发查克拉波动();
            更新星空();
        }

        function createStars() {
            const universe = document.getElementById('universe');
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 3 + 's';
                universe.appendChild(star);
            }
        }

        function 更新星空() {
            const universe = document.getElementById('universe');
            universe.innerHTML = '';
            createStars();
        }

        function 触发查克拉波动() {
            const points = document.querySelectorAll('.chakra-point');
            points.forEach(point => {
                point.style.animation = 'none';
                setTimeout(() => point.style.animation = 'chakraGlow 2s infinite', 10);
            });
        }

        function 更新轮回显示() {
            document.getElementById('currentCycle').textContent = 轮回.轮回次数;
        }

        function triggerBigBang() {
            if (!contentUnlocked) return;
            轮回.宇宙重启();
        }

        // ==================== 音乐播放器功能 ====================
        const music = document.getElementById('backgroundMusic');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const progressBar = document.getElementById('progressBar');
        const progressContainer = document.getElementById('progressContainer');
        const progressHandle = document.getElementById('progressHandle');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        const volumeControl = document.getElementById('volumeControl');
        const volumeValue = document.getElementById('volumeValue');
        const lyricsContainer = document.getElementById('lyricsContainer');
        const currentLyric = document.getElementById('currentLyric');
        const nextLyric = document.getElementById('nextLyric');
        const musicPlayer = document.getElementById('musicPlayer');
        const dragHandle = document.getElementById('dragHandle');

        const lyrics = [
            { time: 9, text: "等不到你 成为我最闪亮的星星" },
            { time: 16, text: "我依然愿意借给你我的光" },
            { time: 23, text: "投射给你 直到你那灿烂的光芒" },
            { time: 30, text: "静静地挂在遥远的天上" },
            { time: 37, text: "当你沉浸 天空那条冰冷的银河" },
            { time: 44, text: "隐没在宇宙深处 我正穿越" },
            { time: 51, text: "茫茫人海 为你点亮 一盏温暖的灯火" },
            { time: 65, text: "一闪一闪亮晶晶 好像你的身体" },
            { time: 72, text: "藏在众多孤星之中 还是找得到你" },
            { time: 79, text: "挂在天上放光明 反射我的孤寂" },
            { time: 86, text: "提醒我 我也只是一颗寂寞的星星" },
            { time: 100, text: "浩瀚的世界里 更迭的人海里" },
            { time: 107, text: "和你互相辉映 让我们延续" },
            { time: 114, text: "用尽所有思念 唱一首歌给你" },
            { time: 121, text: "给你 一闪一闪亮晶晶" },
            { time: 128, text: "好像你的身体 藏在众多孤星之中" },
            { time: 135, text: "还是找得到你 挂在天上放光明" },
            { time: 142, text: "反射我的过去 提醒我" },
            { time: 149, text: "我不再是一颗寂寞的星星" },
            { time: 180, text: "等不到你 成为我最闪亮的星星" },
            { time: 187, text: "我依然愿意借给你我的光" },
            { time: 194, text: "投射给你 直到你那灿烂的光芒" },
            { time: 201, text: "静静地挂在遥远的天上" },
            { time: 208, text: "当你沉浸 天空那条冰冷的银河" },
            { time: 215, text: "隐没在宇宙深处 我正穿越" },
            { time: 222, text: "茫茫人海 为你点亮 一盏温暖的灯火" }
        ];

        let currentLyricIndex = -1;
        let lyricsVisible = false;

        function playPause() {
            if (music.paused) {
                music.play().then(() => {
                    playPauseBtn.innerHTML = '⏸️';
                    playPauseBtn.title = '暂停';
                }).catch(e => console.log('播放失败，需要用户交互'));
            } else {
                music.pause();
                playPauseBtn.innerHTML = '▶️';
                playPauseBtn.title = '播放';
            }
        }

        function skipForward() {
            music.currentTime = Math.min(music.duration, music.currentTime + 15);
            updateProgress();
        }

        function skipBackward() {
            music.currentTime = Math.max(0, music.currentTime - 15);
            updateProgress();
        }

        function toggleLyrics() {
            lyricsVisible = !lyricsVisible;
            lyricsContainer.classList.toggle('show', lyricsVisible);
        }

        function updateLyrics() {
            const currentTime = music.currentTime;
            let newIndex = -1;
            for (let i = lyrics.length - 1; i >= 0; i--) {
                if (currentTime >= lyrics[i].time) {
                    newIndex = i;
                    break;
                }
            }
            if (newIndex !== currentLyricIndex) {
                currentLyricIndex = newIndex;
                if (currentLyricIndex >= 0) {
                    currentLyric.textContent = lyrics[currentLyricIndex].text;
                    nextLyric.textContent = (currentLyricIndex < lyrics.length - 1) ? lyrics[currentLyricIndex + 1].text : '';
                    currentLyric.style.transform = 'scale(1.1)';
                    currentLyric.style.color = '#ff4757';
                    setTimeout(() => {
                        currentLyric.style.transform = 'scale(1)';
                        currentLyric.style.color = '#2ed573';
                    }, 300);
                } else {
                    currentLyric.textContent = '音乐即将开始...';
                    nextLyric.textContent = lyrics[0].text;
                }
            }
        }

        function updateProgress() {
            if (music.duration) {
                const percent = (music.currentTime / music.duration) * 100;
                progressBar.style.width = percent + '%';
                progressHandle.style.left = percent + '%';
                currentTimeEl.textContent = formatTime(music.currentTime);
                durationEl.textContent = formatTime(music.duration);
                updateLyrics();
            }
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function setupProgressBar() {
            progressContainer.addEventListener('click', function(e) {
                const rect = this.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                music.currentTime = percent * music.duration;
                updateProgress();
            });
        }

        volumeControl.addEventListener('input', function() {
            music.volume = this.value;
            volumeValue.textContent = Math.round(this.value * 100) + '%';
        });

        // ==================== 播放器拖拽功能 ====================
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };

        function startDrag(e) {
            if (e.button !== 0) return;
            isDragging = true;
            musicPlayer.classList.add('dragging');
            const rect = musicPlayer.getBoundingClientRect();
            dragOffset.x = e.clientX - rect.left;
            dragOffset.y = e.clientY - rect.top;
            e.preventDefault();
        }

        function onDrag(e) {
            if (!isDragging) return;
            let newX = e.clientX - dragOffset.x;
            let newY = e.clientY - dragOffset.y;
            const maxX = window.innerWidth - musicPlayer.offsetWidth;
            const maxY = window.innerHeight - musicPlayer.offsetHeight;
            newX = Math.max(0, Math.min(newX, maxX));
            newY = Math.max(0, Math.min(newY, maxY));
            musicPlayer.style.left = newX + 'px';
            musicPlayer.style.top = newY + 'px';
            musicPlayer.style.transform = 'none';
        }

        function endDrag() {
            isDragging = false;
            musicPlayer.classList.remove('dragging');
        }

        dragHandle.addEventListener('mousedown', startDrag);
        document.addEventListener('mousemove', onDrag);
        document.addEventListener('mouseup', endDrag);

        // 触摸设备支持
        dragHandle.addEventListener('touchstart', function(e) {
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousedown', { clientX: touch.clientX, clientY: touch.clientY });
            startDrag(mouseEvent);
        });
        document.addEventListener('touchmove', function(e) {
            if (!isDragging) return;
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousemove', { clientX: touch.clientX, clientY: touch.clientY });
            onDrag(mouseEvent);
            e.preventDefault();
        });
        document.addEventListener('touchend', endDrag);

        // ==================== 初始化设置 ====================
        document.addEventListener('DOMContentLoaded', function() {
            createStars();
            更新轮回显示();
            setupProgressBar();

            music.addEventListener('timeupdate', updateProgress);
            music.addEventListener('ended', function() {
                playPauseBtn.innerHTML = '▶️';
                playPauseBtn.title = '播放';
            });

            music.volume = volumeControl.value;

            document.addEventListener('click', function initAudio() {
                document.removeEventListener('click', initAudio);
                music.volume = 0;
                music.play().then(() => {
                    music.pause();
                    music.volume = volumeControl.value;
                });
            });

            setInterval(() => {
                if (轮回.检查自然轮回()) {
                    console.log("🎂 生日快乐！自动触发年度轮回");
                    轮回.宇宙重启();
                }
            }, 5 * 60 * 1000);

            setInterval(() => {
                if (Math.random() < 0.1 && contentUnlocked) {
                    console.log("🔮 演示模式：触发轮回");
                    轮回.宇宙重启();
                }
            }, 27000);

            setInterval(() => {
                if (Math.random() < 0.01 && contentUnlocked) {
                    触发查克拉波动();
                }
            }, 1000);

            console.log(`%c
             🌀 轮回之爱系统已启动
             👁️ 轮回眼、写轮眼、白眼准备就绪
             🔒 请输入密码解锁完整内容
            `, 'color: #ff4757; font-size: 14px; font-weight: bold;');
        });
    </script>
</body>
</html>